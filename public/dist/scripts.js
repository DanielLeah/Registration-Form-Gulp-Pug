
var registrationController=function(){function l(e){return!!e.match(/^[a-zA-Z]+$/)}return{getValidation:function(e,t,n,a){return{firstNameVal:l(e),lastNameVal:l(t),emailVal:function(e){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}(n),genderVal:function(e){return"choose"!=e}(a)}}}}(),UIController=function(){var t={firstname:"firstname",lastname:"lastname",email:"email",gender:"gender",bday:"bday",submitButton:".btn"};return{getInputs:function(){return{firstName:document.getElementById(t.firstname).value,lastName:document.getElementById(t.lastname).value,email:document.getElementById(t.email).value,gender:document.getElementById(t.gender).value,bday:document.getElementById(t.bday).value}},getDOMStrings:function(){return t},setClasses:function(e,t){!function(e,t){!0!==e?(document.querySelector("."+t).classList.remove("hidden"),document.querySelector("."+t).classList.add("invalid")):(document.querySelector("."+t).classList.remove("hidden"),document.querySelector("."+t).classList.add("valid"))}(e,t)},initClasses:function(){!function(){for(var e=document.getElementsByClassName("icon"),t=0;t<e.length;t++)e[t].classList.add("hidden"),e[t].classList.remove("invalid"),e[t].classList.remove("valid")}()},updateData:function(e){!function(e){document.getElementById(t.firstname).value=e.firstName,document.getElementById(t.lastname).value=e.lastName,document.getElementById(t.email).value=e.email,document.getElementById(t.gender).value=e.gender,document.getElementById(t.bday).value=e.bday}(e)}}}(),controller=function(a,l){var o,t=function(){var e,t,n;e=l.getInputs(),l.initClasses(),""!==e.firstname&&""!==e.lastname&&(t=a.getValidation(e.firstName,e.lastName,e.email,e.gender)),n=!0,Object.keys(t).forEach(function(e){l.setClasses(t[e],e),!1===t[e]&&(n=!1)}),n?(localStorage.setItem("formInputs",JSON.stringify(e)),console.log("if valid"),o=JSON.parse(localStorage.getItem("formInputs")),s(),setTimeout(function(){l.updateData(o)},1500)):console.log("not saved")};function s(){document.getElementById("firstname").value="",document.getElementById("lastname").value="",document.getElementById("email").value="",document.getElementById("gender").value="choose",document.getElementById("bday").value="",l.initClasses()}return{init:function(){console.log("Application has started."),l.initClasses(),function(){var e=l.getDOMStrings();document.querySelector(e.submitButton).addEventListener("click",t),document.addEventListener("keypress",function(e){13===e.keyCode&&t()})}()},clearLocalInputs:function(){s()}}}(registrationController,UIController),templateHTML=templates["testing-data"]({message:JSON.stringify(JSON.parse(localStorage.getItem("formInputs")))});document.write(templateHTML),controller.init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImtub2Nrb3V0LmpzIiwic2NyaXB0LmpzIl0sIm5hbWVzIjpbInJlZ2lzdHJhdGlvbkNvbnRyb2xsZXIiLCJpbnB1dEFscGhhYmV0IiwiaW5wdXR0ZXh0IiwibWF0Y2giLCJnZXRWYWxpZGF0aW9uIiwiZmlyc3ROIiwibGFzdE4iLCJlbWFpbCIsImdlbmRlciIsImZpcnN0TmFtZVZhbCIsImxhc3ROYW1lVmFsIiwiZW1haWxWYWwiLCJ0ZXN0IiwiZW1haWxWYWxpZGF0aW9uIiwiZ2VuZGVyVmFsIiwidHJ1ZVNlbGVjdGlvbiIsIlVJQ29udHJvbGxlciIsIkRPTVN0cmluZ3MiLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIsImJkYXkiLCJzdWJtaXRCdXR0b24iLCJnZXRJbnB1dHMiLCJmaXJzdE5hbWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJsYXN0TmFtZSIsImdldERPTVN0cmluZ3MiLCJzZXRDbGFzc2VzIiwiaXNWYWwiLCJrZXkiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwidXBkYXRlQ2xhc3NlcyIsImluaXRDbGFzc2VzIiwiaWNvbnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaSIsImxlbmd0aCIsInVwZGF0ZURhdGEiLCJkYXRhIiwiY29udHJvbGxlciIsInJlZ2lzQ3RybCIsIlVJQ3RybCIsImZvcm1JbnB1dHMiLCJzYXZlUmVnaXN0cmF0aW9uIiwiaW5wdXQiLCJ2YWxSZXN1bHQiLCJpc1ZhbGlkIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbnNvbGUiLCJsb2ciLCJwYXJzZSIsImdldEl0ZW0iLCJjbGVhcklucHV0cyIsInNldFRpbWVvdXQiLCJpbml0IiwiRE9NU3RyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwia2V5Q29kZSIsInNldHVwRXZlbnRMaXN0ZW5lcnMiLCJjbGVhckxvY2FsSW5wdXRzIiwidGVtcGxhdGVIVE1MIiwidGVtcGxhdGVzIiwibWVzc2FnZSIsIndyaXRlIl0sIm1hcHBpbmdzIjoiQUFBQTtBQ09BLElBQUlBLHVCQUF5QixXQUVMLFNBQWhCQyxFQUF5QkMsR0FFekIsUUFBSUEsRUFBVUMsTUFEQyxlQTJCbkIsTUFBTSxDQUNGQyxjQUFlLFNBQVNDLEVBQU9DLEVBQU1DLEVBQU1DLEdBQ3ZDLE1BQU8sQ0FDSEMsYUFBZVIsRUFBY0ksR0FDN0JLLFlBQWNULEVBQWNLLEdBQzVCSyxTQXhCVSxTQUFTVCxHQUM1QixRQUFJLGdEQUFnRFUsS0FBS1YsR0F1QnJDVyxDQUFnQk4sR0FDM0JPLFVBakJRLFNBQVVaLEdBQzFCLE1BQWlCLFVBQWJBLEVBZ0JnQmEsQ0FBY1AsTUFwQ2IsR0FrRHpCUSxhQUFlLFdBQ2YsSUFBSUMsRUFBYSxDQUNiQyxVQUFZLFlBQ1pDLFNBQVcsV0FDWFosTUFBUSxRQUNSQyxPQUFTLFNBQ1RZLEtBQU8sT0FDUEMsYUFBZSxRQStCbkIsTUFBTyxDQUdIQyxVQUFZLFdBQ1IsTUFBTyxDQUNIQyxVQUFZQyxTQUFTQyxlQUFlUixFQUFXQyxXQUFXUSxNQUMxREMsU0FBV0gsU0FBU0MsZUFBZVIsRUFBV0UsVUFBVU8sTUFDeERuQixNQUFRaUIsU0FBU0MsZUFBZVIsRUFBV1YsT0FBT21CLE1BQ2xEbEIsT0FBU2dCLFNBQVNDLGVBQWVSLEVBQVdULFFBQVFrQixNQUNwRE4sS0FBT0ksU0FBU0MsZUFBZVIsRUFBV0csTUFBTU0sUUFLeERFLGNBQWdCLFdBQ1osT0FBT1gsR0FHWFksV0FBWSxTQUFTQyxFQUFPQyxJQXBDWixTQUFVRCxFQUFPQyxJQUNuQixJQUFWRCxHQUNBTixTQUFTUSxjQUFjLElBQUlELEdBQUtFLFVBQVVDLE9BQU8sVUFDakRWLFNBQVNRLGNBQWMsSUFBSUQsR0FBS0UsVUFBVUUsSUFBSSxhQUU5Q1gsU0FBU1EsY0FBYyxJQUFJRCxHQUFLRSxVQUFVQyxPQUFPLFVBQ2pEVixTQUFTUSxjQUFjLElBQUlELEdBQUtFLFVBQVVFLElBQUksVUErQjlDQyxDQUFjTixFQUFPQyxJQUd6Qk0sWUFBYSxZQWxEQyxXQUdkLElBRkEsSUFBSUMsRUFBUWQsU0FBU2UsdUJBQXVCLFFBRXBDQyxFQUFFLEVBQUdBLEVBQUdGLEVBQU1HLE9BQVFELElBQzFCRixFQUFNRSxHQUFHUCxVQUFVRSxJQUFJLFVBQ3ZCRyxFQUFNRSxHQUFHUCxVQUFVQyxPQUFPLFdBQzFCSSxFQUFNRSxHQUFHUCxVQUFVQyxPQUFPLFNBNkMxQkcsSUFHSkssV0FBWSxTQUFTQyxJQWxDUixTQUFVQSxHQUN2Qm5CLFNBQVNDLGVBQWVSLEVBQVdDLFdBQVdRLE1BQVFpQixFQUFLcEIsVUFDM0RDLFNBQVNDLGVBQWVSLEVBQVdFLFVBQVVPLE1BQVFpQixFQUFLaEIsU0FDMURILFNBQVNDLGVBQWVSLEVBQVdWLE9BQU9tQixNQUFRaUIsRUFBS3BDLE1BQ3ZEaUIsU0FBU0MsZUFBZVIsRUFBV1QsUUFBUWtCLE1BQVFpQixFQUFLbkMsT0FDeERnQixTQUFTQyxlQUFlUixFQUFXRyxNQUFNTSxNQUFRaUIsRUFBS3ZCLEtBOEJsRHNCLENBQVdDLEtBakVKLEdBd0VmQyxXQUFhLFNBQVVDLEVBQVdDLEdBRWxDLElBQUlDLEVBY0FDLEVBQW1CLFdBQ25CLElBQUlDLEVBQU9DLEVBQVdDLEVBQ3RCRixFQUFRSCxFQUFPeEIsWUFDZndCLEVBQU9ULGNBQ2lCLEtBQXBCWSxFQUFNL0IsV0FBdUMsS0FBbkIrQixFQUFNOUIsV0FDaEMrQixFQUFZTCxFQUFVekMsY0FBYzZDLEVBQU0xQixVQUFXMEIsRUFBTXRCLFNBQVVzQixFQUFNMUMsTUFBTzBDLEVBQU16QyxTQUU1RjJDLEdBQVUsRUFDVkMsT0FBT0MsS0FBS0gsR0FBV0ksUUFBUSxTQUFTdkIsR0FDcENlLEVBQU9qQixXQUFXcUIsRUFBVW5CLEdBQU1BLElBQ1gsSUFBbkJtQixFQUFVbkIsS0FDVm9CLEdBQVUsS0FHZEEsR0FDQUksYUFBYUMsUUFBUSxhQUFhQyxLQUFLQyxVQUFVVCxJQUNqRFUsUUFBUUMsSUFBSSxZQUNaYixFQUFhVSxLQUFLSSxNQUFNTixhQUFhTyxRQUFRLGVBRTdDQyxJQUNBQyxXQUFXLFdBQ1BsQixFQUFPSixXQUFXSyxJQUNuQixPQUlIWSxRQUFRQyxJQUFJLGNBS3BCLFNBQVNHLElBR0x2QyxTQUFTQyxlQUFlLGFBQWFDLE1BQVEsR0FDN0NGLFNBQVNDLGVBQWUsWUFBWUMsTUFBUSxHQUM1Q0YsU0FBU0MsZUFBZSxTQUFTQyxNQUFRLEdBQ3pDRixTQUFTQyxlQUFlLFVBQVVDLE1BQVEsU0FDMUNGLFNBQVNDLGVBQWUsUUFBUUMsTUFBUSxHQUN4Q29CLEVBQU9ULGNBT1gsTUFBTyxDQUNINEIsS0FBTSxXQUNGTixRQUFRQyxJQUFJLDRCQUNaZCxFQUFPVCxjQTlEVyxXQUd0QixJQUFJNkIsRUFBU3BCLEVBQU9sQixnQkFFcEJKLFNBQVNRLGNBQWNrQyxFQUFPN0MsY0FBYzhDLGlCQUFpQixRQUFTbkIsR0FDdEV4QixTQUFTMkMsaUJBQWlCLFdBQVksU0FBU0MsR0FDckIsS0FBbEJBLEVBQU1DLFNBQ05yQixNQXVESnNCLElBR0pDLGlCQUFrQixXQUNkUixNQXRFSyxDQTBFZC9ELHVCQUF3QmdCLGNBQ3ZCd0QsYUFBZUMsVUFBVSxnQkFBZ0IsQ0FDekNDLFFBQVNqQixLQUFLQyxVQUFVRCxLQUFLSSxNQUFNTixhQUFhTyxRQUFRLGtCQUU1RHRDLFNBQVNtRCxNQUFNSCxjQUNmNUIsV0FBV3FCIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKmpzbGludCBkZXZlbDogdHJ1ZSAqL1xuXG4vKmVzbGludCBuby1jb25zb2xlOiBcIm9mZlwiLCBuby11bmRlZjogXCJvZmZcIiAqL1xuXG4vL01PREVMXG5cbi8vVklFV1xuXG5cbi8vVklFV01PREVMIiwiLypqc2xpbnQgZGV2ZWw6IHRydWUgKi9cclxuXHJcbi8qZXNsaW50IG5vLWNvbnNvbGU6IFwib2ZmXCIsIG5vLXVuZGVmOiBcIm9mZlwiICovXHJcblxyXG4vLyBJTVBMRU1FTlRJTkcgVEhFIE1PRFVMRSBQQVRURVJOIC8vIFxyXG5cclxuLy9NYW5hZ2UgRGF0YSBcclxudmFyIHJlZ2lzdHJhdGlvbkNvbnRyb2xsZXIgPSAoZnVuY3Rpb24oKXtcclxuICAgIFxyXG4gICAgdmFyIGlucHV0QWxwaGFiZXQgPSBmdW5jdGlvbihpbnB1dHRleHQpIHtcclxuICAgICAgICB2YXIgYWxwaGFFeHAgPSAvXlthLXpBLVpdKyQvO1xyXG4gICAgICAgIGlmIChpbnB1dHRleHQubWF0Y2goYWxwaGFFeHApKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBlbWFpbFZhbGlkYXRpb24gPSBmdW5jdGlvbihpbnB1dHRleHQpIHtcclxuICAgICAgIGlmICgvXlxcdysoW1xcLi1dP1xcdyspKkBcXHcrKFtcXC4tXT9cXHcrKSooXFwuXFx3ezIsM30pKyQvLnRlc3QoaW5wdXR0ZXh0KSlcclxuICAgICAgIHtcclxuICAgICAgICAgICByZXR1cm4gKHRydWUpXHJcbiAgICAgICB9XHJcbiAgICAgICAgICAgcmV0dXJuIChmYWxzZSlcclxuICAgIH07XHJcblxyXG4gICAgdmFyIHRydWVTZWxlY3Rpb24gPSBmdW5jdGlvbiAoaW5wdXR0ZXh0KSB7XHJcbiAgICAgICAgaWYgKGlucHV0dGV4dCA9PSBcImNob29zZVwiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICAvL3ZhciBkYXRhTG9jYWwgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZm9ybUlucHV0c1wiKSk7XHJcbiAgICBcclxuICAgIFxyXG4gICAgcmV0dXJue1xyXG4gICAgICAgIGdldFZhbGlkYXRpb246IGZ1bmN0aW9uKGZpcnN0TixsYXN0TixlbWFpbCxnZW5kZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZpcnN0TmFtZVZhbCA6IGlucHV0QWxwaGFiZXQoZmlyc3ROKSwgXHJcbiAgICAgICAgICAgICAgICBsYXN0TmFtZVZhbCA6IGlucHV0QWxwaGFiZXQobGFzdE4pLFxyXG4gICAgICAgICAgICAgICAgZW1haWxWYWwgOiBlbWFpbFZhbGlkYXRpb24oZW1haWwpLFxyXG4gICAgICAgICAgICAgICAgZ2VuZGVyVmFsIDogdHJ1ZVNlbGVjdGlvbihnZW5kZXIpICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAvKiBnZXREYXRhOiBmdW5jdGlvbigpeyAgIHdoeSBub3Qgd29ya2luZz9cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGFMb2NhbDtcclxuICAgICAgICB9Ki9cclxuICAgICAgICBcclxuICB9ICBcclxuICAgIFxyXG4gICAgXHJcbn0pKCk7XHJcblxyXG4vL01hbmFnZSBVSVxyXG52YXIgVUlDb250cm9sbGVyID0gKGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgRE9NU3RyaW5ncyA9IHtcclxuICAgICAgICBmaXJzdG5hbWUgOiAnZmlyc3RuYW1lJyxcclxuICAgICAgICBsYXN0bmFtZSA6ICdsYXN0bmFtZScsXHJcbiAgICAgICAgZW1haWwgOiAnZW1haWwnLFxyXG4gICAgICAgIGdlbmRlciA6ICdnZW5kZXInLFxyXG4gICAgICAgIGJkYXkgOiAnYmRheScsXHJcbiAgICAgICAgc3VibWl0QnV0dG9uIDogJy5idG4nXHJcbiAgICB9OyBcclxuICAgIFxyXG4gICAgdmFyIGluaXRDbGFzc2VzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGljb25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnaWNvbicpO1xyXG5cclxuICAgICAgICBmb3IodmFyIGk9MDsgaTwgaWNvbnMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpY29uc1tpXS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgaWNvbnNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZCcpO1xyXG4gICAgICAgICAgICBpY29uc1tpXS5jbGFzc0xpc3QucmVtb3ZlKCd2YWxpZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgdmFyIHVwZGF0ZUNsYXNzZXMgPSBmdW5jdGlvbiAoaXNWYWwsIGtleSkge1xyXG4gICAgICAgIGlmIChpc1ZhbCAhPT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nK2tleSkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy4nK2tleSkuY2xhc3NMaXN0LmFkZCgnaW52YWxpZCcpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJytrZXkpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJytrZXkpLmNsYXNzTGlzdC5hZGQoJ3ZhbGlkJyk7XHJcbiAgICAgICAgfSAgICAgXHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICB2YXIgdXBkYXRlRGF0YSA9IGZ1bmN0aW9uIChkYXRhKXtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChET01TdHJpbmdzLmZpcnN0bmFtZSkudmFsdWUgPSBkYXRhLmZpcnN0TmFtZTtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChET01TdHJpbmdzLmxhc3RuYW1lKS52YWx1ZSA9IGRhdGEubGFzdE5hbWU7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRE9NU3RyaW5ncy5lbWFpbCkudmFsdWUgPSBkYXRhLmVtYWlsO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKERPTVN0cmluZ3MuZ2VuZGVyKS52YWx1ZSA9IGRhdGEuZ2VuZGVyO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKERPTVN0cmluZ3MuYmRheSkudmFsdWUgPSBkYXRhLmJkYXk7XHJcbiAgICB9O1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGdldCB0aGUgZGF0YSBmcm9tIGlucHV0c1xyXG4gICAgICAgIGdldElucHV0cyA6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWUgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChET01TdHJpbmdzLmZpcnN0bmFtZSkudmFsdWUsXHJcbiAgICAgICAgICAgICAgICBsYXN0TmFtZSA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKERPTVN0cmluZ3MubGFzdG5hbWUpLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgZW1haWwgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChET01TdHJpbmdzLmVtYWlsKS52YWx1ZSxcclxuICAgICAgICAgICAgICAgIGdlbmRlciA6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKERPTVN0cmluZ3MuZ2VuZGVyKS52YWx1ZSxcclxuICAgICAgICAgICAgICAgIGJkYXkgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChET01TdHJpbmdzLmJkYXkpLnZhbHVlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vcmV0dXJuIHRoZSBET01TdHJpbmdzXHJcbiAgICAgICAgZ2V0RE9NU3RyaW5ncyA6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHJldHVybiBET01TdHJpbmdzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgc2V0Q2xhc3NlczogZnVuY3Rpb24oaXNWYWwsIGtleSl7XHJcbiAgICAgICAgICAgIHVwZGF0ZUNsYXNzZXMoaXNWYWwsIGtleSk7ICBcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIGluaXRDbGFzc2VzOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBpbml0Q2xhc3NlcygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgdXBkYXRlRGF0YTogZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgIHVwZGF0ZURhdGEoZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KSgpO1xyXG5cclxuLy8gR2xvYmFsIEFwcCBDb250cm9sbGVyXHJcblxyXG52YXIgY29udHJvbGxlciA9IChmdW5jdGlvbihyZWdpc0N0cmwsIFVJQ3RybCl7XHJcbiAgICAgXHJcbiAgICB2YXIgZm9ybUlucHV0cztcclxuICAgIHZhciBzZXR1cEV2ZW50TGlzdGVuZXJzID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIFxyXG4gICAgICAgIHZhciBET01TdHIgPSBVSUN0cmwuZ2V0RE9NU3RyaW5ncygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoRE9NU3RyLnN1Ym1pdEJ1dHRvbikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzYXZlUmVnaXN0cmF0aW9uKTtcclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgc2F2ZVJlZ2lzdHJhdGlvbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHZhciBzYXZlUmVnaXN0cmF0aW9uID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGlucHV0LCB2YWxSZXN1bHQsIGlzVmFsaWQ7XHJcbiAgICAgICAgaW5wdXQgPSBVSUN0cmwuZ2V0SW5wdXRzKCk7XHJcbiAgICAgICAgVUlDdHJsLmluaXRDbGFzc2VzKCk7XHJcbiAgICAgICAgaWYgKGlucHV0LmZpcnN0bmFtZSAhPT0gXCJcIiAmJiBpbnB1dC5sYXN0bmFtZSAhPT0gXCJcIiApe1xyXG4gICAgICAgICAgICB2YWxSZXN1bHQgPSByZWdpc0N0cmwuZ2V0VmFsaWRhdGlvbihpbnB1dC5maXJzdE5hbWUsIGlucHV0Lmxhc3ROYW1lLCBpbnB1dC5lbWFpbCwgaW5wdXQuZ2VuZGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaXNWYWxpZCA9IHRydWU7XHJcbiAgICAgICAgT2JqZWN0LmtleXModmFsUmVzdWx0KS5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7XHJcbiAgICAgICAgICAgIFVJQ3RybC5zZXRDbGFzc2VzKHZhbFJlc3VsdFtrZXldLCBrZXkpOyAgXHJcbiAgICAgICAgICAgIGlmICh2YWxSZXN1bHRba2V5XSA9PT0gZmFsc2Upe1xyXG4gICAgICAgICAgICAgICAgaXNWYWxpZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGlzVmFsaWQpe1xyXG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImZvcm1JbnB1dHNcIixKU09OLnN0cmluZ2lmeShpbnB1dCkpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImlmIHZhbGlkXCIpO1xyXG4gICAgICAgICAgICBmb3JtSW5wdXRzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImZvcm1JbnB1dHNcIikpO1xyXG4gICAgICAgICAgICAvL2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5wdXRzXCIpLmlubmVySFRNTCA9IEpTT04uc3RyaW5naWZ5KEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJmb3JtSW5wdXRzXCIpKSk7XHJcbiAgICAgICAgICAgIGNsZWFySW5wdXRzKCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIFVJQ3RybC51cGRhdGVEYXRhKGZvcm1JbnB1dHMpO1xyXG4gICAgICAgICAgICAgfSwxNTAwKTtcclxuXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbm90IHNhdmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgZnVuY3Rpb24gY2xlYXJJbnB1dHMoKXtcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZpcnN0bmFtZVwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJsYXN0bmFtZVwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlbWFpbFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJnZW5kZXJcIikudmFsdWUgPSBcImNob29zZVwiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmRheVwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgICAgVUlDdHJsLmluaXRDbGFzc2VzKCk7IFxyXG4gICAgfVxyXG4gICAgXHJcbiAgIC8qIGZ1bmN0aW9uIGNsZWFyTG9jYWwoKXtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcclxuICAgIH0qL1xyXG4gICAgXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQXBwbGljYXRpb24gaGFzIHN0YXJ0ZWQuJyk7XHJcbiAgICAgICAgICAgIFVJQ3RybC5pbml0Q2xhc3NlcygpO1xyXG4gICAgICAgICAgICBzZXR1cEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICBjbGVhckxvY2FsSW5wdXRzOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjbGVhcklucHV0cygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxufSkocmVnaXN0cmF0aW9uQ29udHJvbGxlciwgVUlDb250cm9sbGVyKTtcclxudmFyIHRlbXBsYXRlSFRNTCA9IHRlbXBsYXRlc1tcInRlc3RpbmctZGF0YVwiXSh7XHJcbiAgICBtZXNzYWdlOiBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZm9ybUlucHV0c1wiKSkpXHJcbn0pO1xyXG5kb2N1bWVudC53cml0ZSh0ZW1wbGF0ZUhUTUwpO1xyXG5jb250cm9sbGVyLmluaXQoKTtcclxuIl19
