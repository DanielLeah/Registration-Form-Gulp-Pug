var registrationController=function(){function l(e){return!!e.match(/^[a-zA-Z]+$/)}return{getValidation:function(e,t,n,a){return{firstNameVal:l(e),lastNameVal:l(t),emailVal:function(e){return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}(n),genderVal:function(e){return"choose"!=e}(a)}}}}(),UIController=function(){var t={firstname:"firstname",lastname:"lastname",email:"email",gender:"gender",bday:"bday",submitButton:".btn"};return{getInputs:function(){return{firstName:document.getElementById(t.firstname).value,lastName:document.getElementById(t.lastname).value,email:document.getElementById(t.email).value,gender:document.getElementById(t.gender).value,bday:document.getElementById(t.bday).value}},getDOMStrings:function(){return t},setClasses:function(e,t){!function(e,t){!0!==e?(document.querySelector("."+t).classList.remove("hidden"),document.querySelector("."+t).classList.add("invalid")):(document.querySelector("."+t).classList.remove("hidden"),document.querySelector("."+t).classList.add("valid"))}(e,t)},initClasses:function(){!function(){for(var e=document.getElementsByClassName("icon"),t=0;t<e.length;t++)e[t].classList.add("hidden"),e[t].classList.remove("invalid"),e[t].classList.remove("valid")}()},updateData:function(e){!function(e){document.getElementById(t.firstname).value=e.firstName,document.getElementById(t.lastname).value=e.lastName,document.getElementById(t.email).value=e.email,document.getElementById(t.gender).value=e.gender,document.getElementById(t.bday).value=e.bday}(e)}}}(),controller=function(a,l){var o,t=function(){var e,t,n;e=l.getInputs(),l.initClasses(),""!==e.firstname&&""!==e.lastname&&(t=a.getValidation(e.firstName,e.lastName,e.email,e.gender)),n=!0,Object.keys(t).forEach(function(e){l.setClasses(t[e],e),!1===t[e]&&(n=!1)}),n?(localStorage.setItem("formInputs",JSON.stringify(e)),console.log("if valid"),o=JSON.parse(localStorage.getItem("formInputs")),s(),setTimeout(function(){l.updateData(o)},1500)):console.log("not saved")};function s(){document.getElementById("firstname").value="",document.getElementById("lastname").value="",document.getElementById("email").value="",document.getElementById("gender").value="choose",document.getElementById("bday").value="",l.initClasses()}return{init:function(){console.log("Application has started."),l.initClasses(),function(){var e=l.getDOMStrings();document.querySelector(e.submitButton).addEventListener("click",t),document.addEventListener("keypress",function(e){13===e.keyCode&&t()})}()},clearLocalInputs:function(){s()}}}(registrationController,UIController),templateHTML=templates["testing-data"]({message:JSON.stringify(JSON.parse(localStorage.getItem("formInputs")))});document.write(templateHTML),controller.init();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJyZWdpc3RyYXRpb25Db250cm9sbGVyIiwiaW5wdXRBbHBoYWJldCIsImlucHV0dGV4dCIsIm1hdGNoIiwiZ2V0VmFsaWRhdGlvbiIsImZpcnN0TiIsImxhc3ROIiwiZW1haWwiLCJnZW5kZXIiLCJmaXJzdE5hbWVWYWwiLCJsYXN0TmFtZVZhbCIsImVtYWlsVmFsIiwidGVzdCIsImVtYWlsVmFsaWRhdGlvbiIsImdlbmRlclZhbCIsInRydWVTZWxlY3Rpb24iLCJVSUNvbnRyb2xsZXIiLCJET01TdHJpbmdzIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJiZGF5Iiwic3VibWl0QnV0dG9uIiwiZ2V0SW5wdXRzIiwiZmlyc3ROYW1lIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwibGFzdE5hbWUiLCJnZXRET01TdHJpbmdzIiwic2V0Q2xhc3NlcyIsImlzVmFsIiwia2V5IiwicXVlcnlTZWxlY3RvciIsImNsYXNzTGlzdCIsInJlbW92ZSIsImFkZCIsInVwZGF0ZUNsYXNzZXMiLCJpbml0Q2xhc3NlcyIsImljb25zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImkiLCJsZW5ndGgiLCJ1cGRhdGVEYXRhIiwiZGF0YSIsImNvbnRyb2xsZXIiLCJyZWdpc0N0cmwiLCJVSUN0cmwiLCJmb3JtSW5wdXRzIiwic2F2ZVJlZ2lzdHJhdGlvbiIsImlucHV0IiwidmFsUmVzdWx0IiwiaXNWYWxpZCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwibG9jYWxTdG9yYWdlIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb25zb2xlIiwibG9nIiwicGFyc2UiLCJnZXRJdGVtIiwiY2xlYXJJbnB1dHMiLCJzZXRUaW1lb3V0IiwiaW5pdCIsIkRPTVN0ciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleUNvZGUiLCJzZXR1cEV2ZW50TGlzdGVuZXJzIiwiY2xlYXJMb2NhbElucHV0cyIsInRl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QVEsZUFFN0NDLElBQ0FDLFdBQVcsV0FDUGxCLEVBQU9KLFdBQVdLLElBQ25CLE9BSUhZLFFBQVFDLElBQUksY0FLcEIsU0FBU0csSUFHTHZDLFNBQVNDLGVBQWUsYUFBYUMsTUFBUSxHQUM3Q0YsU0FBU0MsZUFBZSxZQUFZQyxNQUFRLEdBQzVDRixTQUFTQyxlQUFlLFNBQVNDLE1BQVEsR0FDekNGLFNBQVNDLGVBQWUsVUFBVUMsTUFBUSxTQUMxQ0YsU0FBU0MsZUFBZSxRQUFRQyxNQUFRLEdBQ3hDb0IsRUFBT1QsY0FPWCxNQUFPLENBQ0g0QixLQUFNLFdBQ0ZOLFFBQVFDLElBQUksNEJBQ1pkLEVBQU9ULGNBOURXLFdBR3RCLElBQUk2QixFQUFTcEIsRUFBT2xCLGdCQUVwQkosU0FBU1EsY0FBY2tDLEVBQU83QyxjQUFjOEMsaUJBQWlCLFFBQVNuQixHQUN0RXhCLFNBQVMyQyxpQkFBaUIsV0FBWSxTQUFTQyxHQUNyQixLQUFsQkEsRUFBTUMsU0FDTnJCLE1BdURKc0IsSUFHSkMsaUJBQWtCLFdBQ2RSLE1BdEVLLENBMEVkL0QsdUJBQXdCZ0IsY0FDdkJ3RCxhQUFlQyxVQUFVLGdCQUFnQixDQUN6Q0MsUUFBU2pCLEtBQUtDLFVBQVVELEtBQUtJLE1BQU1OLGFBQWFPLFFBQVEsa0JBRTVEdEMsU0FBU21ELE1BQU1ILGNBQ2Y1QixXQUFXcUIiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qanNsaW50IGRldmVsOiB0cnVlICovXHJcblxyXG4vKmVzbGludCBuby1jb25zb2xlOiBcIm9mZlwiLCBuby11bmRlZjogXCJvZmZcIiAqL1xyXG5cclxuLy8gSU1QTEVNRU5USU5HIFRIRSBNT0RVTEUgUEFUVEVSTiAvLyBcclxuXHJcbi8vTWFuYWdlIERhdGEgXHJcbnZhciByZWdpc3RyYXRpb25Db250cm9sbGVyID0gKGZ1bmN0aW9uKCl7XHJcbiAgICBcclxuICAgIHZhciBpbnB1dEFscGhhYmV0ID0gZnVuY3Rpb24oaW5wdXR0ZXh0KSB7XHJcbiAgICAgICAgdmFyIGFscGhhRXhwID0gL15bYS16QS1aXSskLztcclxuICAgICAgICBpZiAoaW5wdXR0ZXh0Lm1hdGNoKGFscGhhRXhwKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgZW1haWxWYWxpZGF0aW9uID0gZnVuY3Rpb24oaW5wdXR0ZXh0KSB7XHJcbiAgICAgICBpZiAoL15cXHcrKFtcXC4tXT9cXHcrKSpAXFx3KyhbXFwuLV0/XFx3KykqKFxcLlxcd3syLDN9KSskLy50ZXN0KGlucHV0dGV4dCkpXHJcbiAgICAgICB7XHJcbiAgICAgICAgICAgcmV0dXJuICh0cnVlKVxyXG4gICAgICAgfVxyXG4gICAgICAgICAgIHJldHVybiAoZmFsc2UpXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciB0cnVlU2VsZWN0aW9uID0gZnVuY3Rpb24gKGlucHV0dGV4dCkge1xyXG4gICAgICAgIGlmIChpbnB1dHRleHQgPT0gXCJjaG9vc2VcIikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgLy92YXIgZGF0YUxvY2FsID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImZvcm1JbnB1dHNcIikpO1xyXG4gICAgXHJcbiAgICBcclxuICAgIHJldHVybntcclxuICAgICAgICBnZXRWYWxpZGF0aW9uOiBmdW5jdGlvbihmaXJzdE4sbGFzdE4sZW1haWwsZ2VuZGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmaXJzdE5hbWVWYWwgOiBpbnB1dEFscGhhYmV0KGZpcnN0TiksIFxyXG4gICAgICAgICAgICAgICAgbGFzdE5hbWVWYWwgOiBpbnB1dEFscGhhYmV0KGxhc3ROKSxcclxuICAgICAgICAgICAgICAgIGVtYWlsVmFsIDogZW1haWxWYWxpZGF0aW9uKGVtYWlsKSxcclxuICAgICAgICAgICAgICAgIGdlbmRlclZhbCA6IHRydWVTZWxlY3Rpb24oZ2VuZGVyKSAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgLyogZ2V0RGF0YTogZnVuY3Rpb24oKXsgICB3aHkgbm90IHdvcmtpbmc/XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhTG9jYWw7XHJcbiAgICAgICAgfSovXHJcbiAgICAgICAgXHJcbiAgfSAgXHJcbiAgICBcclxuICAgIFxyXG59KSgpO1xyXG5cclxuLy9NYW5hZ2UgVUlcclxudmFyIFVJQ29udHJvbGxlciA9IChmdW5jdGlvbigpe1xyXG4gICAgdmFyIERPTVN0cmluZ3MgPSB7XHJcbiAgICAgICAgZmlyc3RuYW1lIDogJ2ZpcnN0bmFtZScsXHJcbiAgICAgICAgbGFzdG5hbWUgOiAnbGFzdG5hbWUnLFxyXG4gICAgICAgIGVtYWlsIDogJ2VtYWlsJyxcclxuICAgICAgICBnZW5kZXIgOiAnZ2VuZGVyJyxcclxuICAgICAgICBiZGF5IDogJ2JkYXknLFxyXG4gICAgICAgIHN1Ym1pdEJ1dHRvbiA6ICcuYnRuJ1xyXG4gICAgfTsgXHJcbiAgICBcclxuICAgIHZhciBpbml0Q2xhc3NlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBpY29ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2ljb24nKTtcclxuXHJcbiAgICAgICAgZm9yKHZhciBpPTA7IGk8IGljb25zLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgaWNvbnNbaV0uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIGljb25zW2ldLmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQnKTtcclxuICAgICAgICAgICAgaWNvbnNbaV0uY2xhc3NMaXN0LnJlbW92ZSgndmFsaWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHZhciB1cGRhdGVDbGFzc2VzID0gZnVuY3Rpb24gKGlzVmFsLCBrZXkpIHtcclxuICAgICAgICBpZiAoaXNWYWwgIT09IHRydWUpe1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJytrZXkpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuJytrZXkpLmNsYXNzTGlzdC5hZGQoJ2ludmFsaWQnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicra2V5KS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLicra2V5KS5jbGFzc0xpc3QuYWRkKCd2YWxpZCcpO1xyXG4gICAgICAgIH0gICAgIFxyXG4gICAgfTtcclxuICAgIFxyXG4gICAgdmFyIHVwZGF0ZURhdGEgPSBmdW5jdGlvbiAoZGF0YSl7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRE9NU3RyaW5ncy5maXJzdG5hbWUpLnZhbHVlID0gZGF0YS5maXJzdE5hbWU7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRE9NU3RyaW5ncy5sYXN0bmFtZSkudmFsdWUgPSBkYXRhLmxhc3ROYW1lO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKERPTVN0cmluZ3MuZW1haWwpLnZhbHVlID0gZGF0YS5lbWFpbDtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChET01TdHJpbmdzLmdlbmRlcikudmFsdWUgPSBkYXRhLmdlbmRlcjtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChET01TdHJpbmdzLmJkYXkpLnZhbHVlID0gZGF0YS5iZGF5O1xyXG4gICAgfTtcclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBcclxuICAgICAgICAvLyBnZXQgdGhlIGRhdGEgZnJvbSBpbnB1dHNcclxuICAgICAgICBnZXRJbnB1dHMgOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRE9NU3RyaW5ncy5maXJzdG5hbWUpLnZhbHVlLFxyXG4gICAgICAgICAgICAgICAgbGFzdE5hbWUgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChET01TdHJpbmdzLmxhc3RuYW1lKS52YWx1ZSxcclxuICAgICAgICAgICAgICAgIGVtYWlsIDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRE9NU3RyaW5ncy5lbWFpbCkudmFsdWUsXHJcbiAgICAgICAgICAgICAgICBnZW5kZXIgOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChET01TdHJpbmdzLmdlbmRlcikudmFsdWUsXHJcbiAgICAgICAgICAgICAgICBiZGF5IDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoRE9NU3RyaW5ncy5iZGF5KS52YWx1ZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICAvL3JldHVybiB0aGUgRE9NU3RyaW5nc1xyXG4gICAgICAgIGdldERPTVN0cmluZ3MgOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICByZXR1cm4gRE9NU3RyaW5ncztcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIHNldENsYXNzZXM6IGZ1bmN0aW9uKGlzVmFsLCBrZXkpe1xyXG4gICAgICAgICAgICB1cGRhdGVDbGFzc2VzKGlzVmFsLCBrZXkpOyAgXHJcbiAgICAgICAgfSxcclxuICAgICAgICBcclxuICAgICAgICBpbml0Q2xhc3NlczogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgaW5pdENsYXNzZXMoKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIFxyXG4gICAgICAgIHVwZGF0ZURhdGE6IGZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICB1cGRhdGVEYXRhKGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSkoKTtcclxuXHJcbi8vIEdsb2JhbCBBcHAgQ29udHJvbGxlclxyXG5cclxudmFyIGNvbnRyb2xsZXIgPSAoZnVuY3Rpb24ocmVnaXNDdHJsLCBVSUN0cmwpe1xyXG4gICAgIFxyXG4gICAgdmFyIGZvcm1JbnB1dHM7XHJcbiAgICB2YXIgc2V0dXBFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICBcclxuICAgICAgICB2YXIgRE9NU3RyID0gVUlDdHJsLmdldERPTVN0cmluZ3MoKTtcclxuICAgICAgICBcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKERPTVN0ci5zdWJtaXRCdXR0b24pLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2F2ZVJlZ2lzdHJhdGlvbik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcclxuICAgICAgICAgICAgICAgIHNhdmVSZWdpc3RyYXRpb24oKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgc2F2ZVJlZ2lzdHJhdGlvbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBpbnB1dCwgdmFsUmVzdWx0LCBpc1ZhbGlkO1xyXG4gICAgICAgIGlucHV0ID0gVUlDdHJsLmdldElucHV0cygpO1xyXG4gICAgICAgIFVJQ3RybC5pbml0Q2xhc3NlcygpO1xyXG4gICAgICAgIGlmIChpbnB1dC5maXJzdG5hbWUgIT09IFwiXCIgJiYgaW5wdXQubGFzdG5hbWUgIT09IFwiXCIgKXtcclxuICAgICAgICAgICAgdmFsUmVzdWx0ID0gcmVnaXNDdHJsLmdldFZhbGlkYXRpb24oaW5wdXQuZmlyc3ROYW1lLCBpbnB1dC5sYXN0TmFtZSwgaW5wdXQuZW1haWwsIGlucHV0LmdlbmRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlzVmFsaWQgPSB0cnVlO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHZhbFJlc3VsdCkuZm9yRWFjaChmdW5jdGlvbihrZXkpe1xyXG4gICAgICAgICAgICBVSUN0cmwuc2V0Q2xhc3Nlcyh2YWxSZXN1bHRba2V5XSwga2V5KTsgIFxyXG4gICAgICAgICAgICBpZiAodmFsUmVzdWx0W2tleV0gPT09IGZhbHNlKXtcclxuICAgICAgICAgICAgICAgIGlzVmFsaWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChpc1ZhbGlkKXtcclxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJmb3JtSW5wdXRzXCIsSlNPTi5zdHJpbmdpZnkoaW5wdXQpKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJpZiB2YWxpZFwiKTtcclxuICAgICAgICAgICAgZm9ybUlucHV0cyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJmb3JtSW5wdXRzXCIpKTtcclxuICAgICAgICAgICAgLy9kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0c1wiKS5pbm5lckhUTUwgPSBKU09OLnN0cmluZ2lmeShKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiZm9ybUlucHV0c1wiKSkpO1xyXG4gICAgICAgICAgICBjbGVhcklucHV0cygpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBVSUN0cmwudXBkYXRlRGF0YShmb3JtSW5wdXRzKTtcclxuICAgICAgICAgICAgIH0sMTUwMCk7XHJcblxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ25vdCBzYXZlZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgIH07XHJcbiAgICBcclxuICAgIGZ1bmN0aW9uIGNsZWFySW5wdXRzKCl7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJmaXJzdG5hbWVcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGFzdG5hbWVcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZW1haWxcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZ2VuZGVyXCIpLnZhbHVlID0gXCJjaG9vc2VcIjtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJkYXlcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgICAgIFVJQ3RybC5pbml0Q2xhc3NlcygpOyBcclxuICAgIH1cclxuICAgIFxyXG4gICAvKiBmdW5jdGlvbiBjbGVhckxvY2FsKCl7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XHJcbiAgICB9Ki9cclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpbml0OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0FwcGxpY2F0aW9uIGhhcyBzdGFydGVkLicpO1xyXG4gICAgICAgICAgICBVSUN0cmwuaW5pdENsYXNzZXMoKTtcclxuICAgICAgICAgICAgc2V0dXBFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXHJcbiAgICAgICAgY2xlYXJMb2NhbElucHV0czogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY2xlYXJJbnB1dHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgXHJcbn0pKHJlZ2lzdHJhdGlvbkNvbnRyb2xsZXIsIFVJQ29udHJvbGxlcik7XHJcbnZhciB0ZW1wbGF0ZUhUTUwgPSB0ZW1wbGF0ZXNbXCJ0ZXN0aW5nLWRhdGFcIl0oe1xyXG4gICAgbWVzc2FnZTogSlNPTi5zdHJpbmdpZnkoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImZvcm1JbnB1dHNcIikpKVxyXG59KTtcclxuZG9jdW1lbnQud3JpdGUodGVtcGxhdGVIVE1MKTtcclxuY29udHJvbGxlci5pbml0KCk7XHJcbiJdfQ==
